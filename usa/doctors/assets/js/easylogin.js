window.EasyLogin={trans:function(e){return EasyLogin.options.lang[e]||e.toString()},alert:function(e,t,n){var r=n.find(".alert:not(.ip-alert)");if(e===null)return r.length?r.hide():0;if(typeof e=="object"){var i=e;e="<ul>";$.each(i,function(t,n){e+="<li>"+(typeof n=="object"?n[0]:n)+"</li>"});e+="</ul>"}if(r.length){r.html("");r.append('<span class="close">&times;</span>');r.on("click",".close",function(e){$(e.delegateTarget).hide()})}else{r=$('<div class="alert alert-dismissible" role="alert"></div>');r.append('<span class="close" data-dismiss="alert">&times;</span>');n.prepend(r)}r.removeClass(t===1?"alert-danger alert-warning":t===0?"alert-danger alert-success":"alert-warning alert-danger");r.addClass("alert-"+(t===1?"success":t===0?"warning":"danger"));r.append(e).show()},log:function(e){if(EasyLogin.options.debug)console.log("Server response:",e)},generateDisplayName:function(){var e=$("#display_name"),t=$("#usermeta-first_name"),n=$("#usermeta-last_name");$.each([t,n],function(r,i){$(i).on("change",function(){var r=$(this).val(),i=false;if($.trim(r)=="")return;e.find("option").each(function(e,t){if($(t).text()==r){i=true;return}});if(!i){e.append("<option>"+r+"</option>");if($.trim(t.val())!=""&&$.trim(n.val())!=""){e.append("<option>"+t.val()+" "+n.val()+"</option>").append("<option>"+n.val()+" "+t.val()+"</option>")}}})})},logout:function(){$.post(EasyLogin.options.ajaxUrl,{action:"logout"},function(){window.location.reload()})},ajaxFormCb:{},admin:{}};jQuery(function(e){e.ajaxSetup({headers:{"X-CSRF-Token":e('meta[name="csrf-token"]').attr("content")}});var t=function(t){t.preventDefault();var n=e(t.currentTarget),r=n.serialize(),i=n.attr("action"),s=n.find("input, select, textarea"),o=n.find('[type="submit"]');if(!i)return;s.prop("disabled",true);o.attr("data-loading-text",EasyLogin.trans("loading"));o.button("loading");EasyLogin.alert(null,null,n);e.ajax({url:EasyLogin.options.ajaxUrl,type:"POST",dataType:"json",data:r+"&action="+i}).done(function(e){if(e.success){if(EasyLogin.ajaxFormCb[i])EasyLogin.ajaxFormCb[i](e.message,n)}else{EasyLogin.alert(e.message||EasyLogin.trans("error"),-1,n);EasyLogin.log(e)}}).fail(function(e){EasyLogin.alert(EasyLogin.trans("error"),-1,n);EasyLogin.log(e.responseJSON&&e.responseJSON.error?e.responseJSON.error:e.responseText)}).always(function(){s.prop("disabled",false);n.find(".focus-me").focus();o.button("reset");try{Recaptcha.reload()}catch(e){}})};e(".ajax-form").on("submit",t);e(".modal").on("show.bs.modal",function(){var t=this;e(".modal").each(function(){if(this!=t)e(this).modal("hide")})}).on("hidden.bs.modal",function(){e(this).find(".alert").hide();if(e(this).attr("id")=="settingsModal")return;e(this).find('input[type="text"], input[type="password"], textarea').val("");e(this).find('input[type="checkbox"]').prop("checked",false)}).attr("data-backdrop","static");if(e.fn.tooltip)e('[data-toggle="tooltip"]').tooltip()})
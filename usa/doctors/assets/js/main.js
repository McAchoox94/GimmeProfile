EasyLogin.recaptcha={html:function(){var e=$("#recaptchaTemplate");return e.length?e.html():""},get:function(){if(EasyLogin.recaptcha.html()=="")return;var e=window.location.protocol=="https:"?"https":"http";var t=$("#recaptcha_public_key").val();$.getScript(e+"://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){Recaptcha.create(t,"recaptcha_widget",{theme:"custom",custom_theme_widget:"recaptcha_widget"})})}};jQuery(function(e){e("#reminderModal, #activationModal, #signupModal").on("show.bs.modal",function(t){e(".modal .recaptcha").html("");e(t.currentTarget).find(".recaptcha").html(EasyLogin.recaptcha.html());EasyLogin.recaptcha.get()});e("#resetModal, #activateModal").on("hide.bs.modal",function(){window.location.hash=""});e(".avatar-container select").on("change",function(){e.get(EasyLogin.options.ajaxUrl,{action:"avatarPreview",type:e(this).val()},function(t){if(t.success)e(".avatar-image").attr("src",t.message)},"json")});e('#settingsModal a[data-toggle="tab"]').on("shown.bs.tab",function(t){var n=e("#settingsModal");var r=e(t.target).attr("href").replace("#","");n.find("form").attr("action",r!="connectTab"?r:"");n.find(".alert").hide();if(r=="settingsMessages"){e.get(EasyLogin.options.ajaxUrl,{action:"getContacts"},function(e){if(e.success){var t=n.find(".contact-list");t.html("");for(var r=0;r<e.message.length;r++){t.append(tmpl("contactItemTemplate",e.message[r]))}}},"json")}});e(".ajax-form").on("click",".social-connect a",function(t){EasyLogin.alert(EasyLogin.trans("connecting")+e(this).text()+"...",0,e(t.delegateTarget))});var t=window.location.hash;switch(t.substr(1,t.indexOf("-")-1)){case"reset":var n=e("#resetModal");n.find('[name="reminder"]').val(t.substr(t.indexOf("-")+1,t.length));n.modal("show");break;case"activate":var n=e("#activateModal");n.find('[name="reminder"]').val(t.substr(t.indexOf("-")+1,t.length));n.modal("show");n.on("shown.bs.modal",function(){n.find("form").trigger("submit")});break;case"settings":var n=e("#settingsModal");n.modal("show");n.find('a[href="#connectTab"]').tab("show");window.location.hash="";break}});EasyLogin.ajaxFormCb.login=function(e){if(e.length)window.location.href=e;else window.location.reload()};EasyLogin.ajaxFormCb.signup=function(e){if($("#signupModal").css("display")=="block")$("#signupSuccessModal").modal("show");else if(e&&e.redirect)window.location.href=e.redirect;else window.location.reload()};EasyLogin.ajaxFormCb.activation=function(){if($("#activationModal").css("display")=="block")$("#activationSuccessModal").modal("show");else window.location.reload()};EasyLogin.ajaxFormCb.activate=function(){$("#activateSuccessModal").modal("show")};EasyLogin.ajaxFormCb.reminder=function(){if($("#reminderModal").css("display")=="block")$("#reminderSuccessModal").modal("show");else window.location.reload()};EasyLogin.ajaxFormCb.reset=function(){if($("#resetModal").css("display")=="block")$("#resetSuccessModal").modal("show");else window.location.href=window.location.origin+window.location.pathname};EasyLogin.ajaxFormCb.settingsAccount=EasyLogin.ajaxFormCb.settingsProfile=EasyLogin.ajaxFormCb.settingsMessages=function(e,t){EasyLogin.alert(EasyLogin.trans("changes_saved"),1,t)};EasyLogin.ajaxFormCb.settingsPassword=function(e,t){t.find("input").val("");EasyLogin.alert(EasyLogin.trans("pass_changed"),1,t)};EasyLogin.ajaxFormCb.webmasterContact=function(e,t){t.find('[name="message"]').val("");EasyLogin.alert(EasyLogin.trans("message_sent"),1,t)}